<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="medicinepro.commodityType.crud">
    <select id="searchCommodityTypeParent" resultMap="categoryt">
            SELECT catId,catParentId,catSort,catExplain,catName title FROM category
        WHERE catParentId IS NULL
    </select>
    <select id="searchCommodityType" resultMap="categoryt" parameterType="string">
         SELECT catId,catParentId,catSort,catExplain,catName title FROM category
        WHERE catParentId=#{parentid}
    </select>
    <select id="searchCommodityTypeseniorSeclct"  resultMap="categoryt" parameterType="string">
        SELECT catId,catParentId,catSort,catExplain,catName title FROM category
        WHERE catId LIKE "%"#{question}"%" OR catName LIKE "%"#{question}"%" OR catParentId LIKE "%"#{question}"%"
        OR catSort LIKE "%"#{question}"%" OR catExplain LIKE "%"#{question}"%"
    </select>
    <resultMap id="categoryt" type="category">
        <id column="catId" property="catId"/>
        <result column="catParentId" property="catParentId"/>
        <result column="catSort" property="catSort"/>
        <result column="catExplain" property="catExplain"/>
        <result column="title" property="title"/>
    </resultMap>

    <!--根据商品类别名称查询商品类别编号-->
    <select id="searchCatId" parameterType="string" resultMap="categoryt">
        SELECT catId,catName title,catParentId,catSort,catExplain FROM category
        WHERE catName=#{ty}
    </select>

    <!-- 获得商品最大编号-->
    <select id="selectCOmmodityId" resultType="string">
        SELECT comId FROM commodity
        ORDER BY comId DESC LIMIT 1
    </select>

    <!--获取单位下拉列表的值-->
    <select id="searchUnit" resultType="String" resultMap="commoditymap">
        SELECT comUnit FROM commodity  GROUP BY comUnit
    </select>

    <resultMap id="commoditymap" type="commodity">
        <result column="comId" property="comId"></result>
        <result column="comName" property="comName"></result>
        <result column="comSimpleCode" property="comSimpleCode"></result>
        <result column="comTypeId" property="comTypeId"></result>
        <result column="comGenericName" property="comGenericName"></result>
        <result column="comBarCode" property="comBarCode"></result>
        <result column="comUnit" property="comUnit"></result>
        <result column="comEpherine" property="comEpherine"></result>
        <result column="comElectonic" property="comElectonic"></result>
        <result column="comProduct" property="comProduct"></result>
        <result column="comMedicame" property="comMedicame"></result>
        <result column="comRegister" property="comRegister"></result>
        <result column="comApproval" property="comApproval"></result>
        <result column="comQuality" property="comQuality"></result>
        <result column="comState" property="comState"></result>
        <result column="comSpecial" property="comSpecial"></result>
        <result column="comPurchase" property="comPurchase"></result>
        <result column="comPrice" property="comPrice"></result>
        <result column="comManufact" property="comManufact"></result>
        <result column="comRemarks" property="comRemarks"></result>
        <result column="comMinKuNumber" property="comMinKuNumber"></result>
        <result column="curingWay" property="curingWay"></result>
        <result column="property" property="property"></result>
        <result column="storageCondition" property="storageCondition"></result>
        <result column="goodsOnSale" property="goodsOnSale"></result>
        <result column="memberSpecials" property="memberSpecials"></result>
        <result column="timeToStart" property="timeToStart"></result>
        <result column="endOfTheTerm" property="endOfTheTerm"></result>
        <result column="commissions" property="commissions"></result>
    </resultMap>

    <!--获取所有工厂信息-->
    <select id="searchManufacturerList" resultType="manufacturer">
        SELECT manId,manName,manTelPhe,manAddressNo,manAddress,manEmail,manRemarks
        FROM manufacturer
    </select>

    <!--查询供货商动态获取下拉框值-->
    <select id="searchAllsupplierList" resultMap="suppliermap">
        SELECT * FROM supplier where duo1 = 0
    </select>
    <resultMap id="suppliermap" type="supplier">
        <result column="supID" property="supID"/>
        <result column="supName" property="supName"/>
        <result column="supLinkman" property="supLinkman"/>
        <result column="supPhone" property="supPhone"/>
        <result column="supMoney" property="supMoney"/>
        <result column="supAddressNo" property="supAddressNo"/>
        <result column="supAddress" property="supAddress"/>
        <result column="supRegion" property="supRegion"/>
        <result column="supDefault" property="supDefault"/>
        <result column="supComment" property="supComment"/>
        <result column="duo1" property="duo1"/>
        <result column="duo2" property="duo2"/>
        <result column="duo3" property="duo3"/>
    </resultMap>

    <!--新增商品信息-->
    <insert id="insertCommodity" parameterType="commodity">
        INSERT INTO commodity(comId,comName,comSimpleCode,comTypeId,comGenericName,comBarCode,comUnit,
        comEpherine,comElectonic,comProduct,comMedicame,comRegister,comApproval,comState,
        comSpecial,comPurchase,comPrice,comManufact,comRemarks,comMinKuNumber,comSupplierNo)
        VALUES(#{comId},#{comName},#{comSimpleCode},#{categoryNo},#{comGenericName},#{comBarCode},#{comUnit},
        #{comEpherine},#{comElectonic},#{comProduct},#{comMedicame},#{comRegister},#{comApproval},#{comState},
        #{comSpecial},#{comPurchase},#{comPrice},#{manId},#{comRemarks},#{comMinKuNumber},#{comMedicame})
    </insert>
</mapper>